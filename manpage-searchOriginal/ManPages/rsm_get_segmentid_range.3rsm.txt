<beginning of page>
rsm_get_segmentid_range <-> get segment ID range
cc [ flag... ] file... -lrsm [ library... ]
#include <rsmapi.h>
int rsm_get_segmentid_range(const char *appid,
 rsm_memseg_id_t *baseid, uint32_t *length);
RSM segment IDs can be either specified by the application or generated by the system using the rsm_memseg_ex<hy>
port_publish(3RSM) function. Applications that specify segment IDs require a reserved range of segment IDs that
they can use. This can be achieved by using rsm_get_segmentid_range() and by reserving a range of segment IDs
in the segment ID configuration file, /etc/rsm/rsm.segmentid. The rsm_get_segmentid_range() function can be
used by applications to obtain the segment ID range reserved for them. The appid argument is a null-terminated
string that identifies the application. The baseid argument points to the location where the starting segment ID of the
reserved range is returned. The length argument points to the location where the number of reserved segment IDs is
returned.
The application can use any value starting at baseid and less than baseid+length. The application should use an off<hy>
set within the range of reserved segment IDs to obtain a segment ID such that if the baseid or length is modified, it
will still be within its reserved range.
It is the responsibility of the system administrator to make sure that the segment ID ranges are properly administered
(such that they are non-overlapping, the file on various nodes of the cluster have identical entries, and so forth.) En<hy>
tries in the /etc/rsm/rsm.segmentid file are of the form:
 #keyword  appid baseid length
 reserved SUNWfoo 0x600000 1000
The fields in the file are separated by tabs or blanks. The first string is a keyword "reserve", followed by the applica<hy>
tion identifier (a string without spaces), the baseid (the starting segment ID of the reserved range in hexadecimal),
and the length (the number of segmentids reserved). Comment lines contain a "#" in the first column. The file should
not contain blank or empty lines. Segment IDs reserved for the system are defined in the </usr/in<hy>
clude/rsm/rsm_common.h> header and cannot be used by the applications.
Upon successful completion, these functions return 0. Otherwise, an error value is returned to indicate the error.
The rsm_get_segmentid_range() function can return the following errors:
RSMERR_BAD_ADDR The address passed is invalid.
RSMERR_BAD_APPID The appid is not defined in configuration file.
RSMERR_BAD_CONF The configuration file is not present or not readable, or the configuration file format is in<hy>
correct.
See attributes(5) for descriptions of the following attributes:
tab() box; lw(2.75i) |lw(2.75i) lw(2.75i) |lw(2.75i) ATTRIBUTE TYPE ATTRIBUTE VALUE _ Interface Stabili<hy>
tyUnstable _ MT-LevelMT-Safe
rsm_memseg_export_publish(3RSM), attributes(5)
